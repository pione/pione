#!/usr/bin/env ruby
# -*- ruby-mode -*-

require 'innocent-white/tuple-space-receiver'
require 'innocent-white/agent/broker'

Thread.abort_on_exception = true

# tuple space receiver
receiver = InnocentWhite::TupleSpaceReceiver.get

# broker
broker = InnocentWhite::Agent[:broker].new(task_worker_resource: 4)
#broker.start_service

# regist broker
receiver.register(broker)

# wait
DRb.thread.join
